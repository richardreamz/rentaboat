!function(a){var b=function(a,b,c){return this.slice(0,a)+c+this.slice(b)};a.fn.percentage=function(c,d){return c===!0&&this.is("input:text")?this.on({"keydown.format":function(c){var e=a(this),f=c.keyCode?c.keyCode:c.which,g=this.selectionStart,h=this.selectionEnd,i=this.value.length,j=e.data("percentage")||{};if(!(46==f||9==f||27==f||13==f||(65==f||82==f)&&(c.ctrlKey||c.metaKey)===!0||(86==f||67==f)&&(c.ctrlKey||c.metaKey)===!0||f>=35&&39>=f)){if((48>f||f>57)&&(96>f||f>105)&&8!==f||c.shiftKey)return void c.preventDefault();if(a.isNumeric(d)){var k=b.call(e.val(),g,h,String.fromCharCode(c.keyCode));if(k>d)return void c.preventDefault()}return 8===c.keyCode?(g>=i&&c.preventDefault(),void(j.c=g===h?g-1:g)):""!==this.value&&g>=i?void c.preventDefault():(j.c=g+1,a(this).data("percentage",j),!0)}},"keyup.format":function(b){var c=a(this),d=b.keyCode?b.keyCode:b.which,e=c.data("percentage");""===this.value||(48>d||d>57)&&(96>d||d>105)&&8!==d||(c.val(c.val()),this.setSelectionRange(e.c,e.c))},"paste.format":function(b){var c=a(this),d=b.originalEvent,e=null;return window.clipboardData&&window.clipboardData.getData?e=window.clipboardData.getData("Text"):d.clipboardData&&d.clipboardData.getData&&(e=d.clipboardData.getData("text/plain")),e>2&&c.val(e),b.preventDefault(),!1}}).each(function(){a(this).data("percentage",{init:!0,max:d})}):this.text(a.percentage.apply(window,arguments))};var c,d;a.isPlainObject(a.valHooks.text)?(a.isFunction(a.valHooks.text.get)&&(c=a.valHooks.text.get),a.isFunction(a.valHooks.text.set)&&(d=a.valHooks.text.set)):a.valHooks.text={},a.valHooks.text.get=function(b){var d=a(b),e=d.data("percentage");return e?""===b.value?"":parseFloat(b.value).toString():a.isFunction(c)?c(b):void 0},a.valHooks.text.set=function(b,c){var e=a(b),f=e.data("percentage");return f?b.value=""===c?"":a.percentage(c,f.max):a.isFunction(d)?d(b,c):void 0},a.percentage=function(b,c){return a.isNumeric(b)||(b=0),a.isNumeric(c)&&b>c&&(b=0),b+"%"}}(jQuery);